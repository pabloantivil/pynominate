---
title: "DW-Nominate Parametric Bootstrapped SEs"
author: "Luke Sonnet"
date: "3/12/2018"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE, fig.width = 6, fig.height = 3)
```

This document walks through some of the results from a parametric bootstrap of DW-NOMINATE standard errors. These data are generated by generating 200 bootstrap samples, where votes on rollcalls for each member are regenerated using the estimated probability the legislator voted yea on the vote. On each bootstraped sample, only the ideal points were updated.

The dataset below includes the bootstrapped standard errors, the average of the bootstrap ideal points, the actual ideal points used in the estimation (pulled off of Voteview.com on March 10, 2018), the Pearson correlation across the two dimensions, and some other metadata such as the total number of valid votes and the last congress the member served in. I'll drop those who voted fewer than 25 times as we do not estimate ideal points for them.

```{r}
library(dplyr)
library(ggplot2)
bt <- read.csv("boot.csv", stringsAsFactors = FALSE) %>%
  filter(nvotes >= 25)
```

### Sanity check

Now let's see how the standard error of each dimension tracks with the number of votes cast.

```{r}
ggplot(bt, aes(x = nvotes, y = se_dim1)) + geom_point(alpha = 0.05) + theme_classic()
ggplot(bt, aes(x = nvotes, y = se_dim2)) + geom_point(alpha = 0.05) + theme_classic()
ggplot(bt, aes(x = log(nvotes), y = se_dim1)) + geom_point(alpha = 0.05) + theme_classic()
ggplot(bt, aes(x = log(nvotes), y = se_dim2)) + geom_point(alpha = 0.05) + theme_classic()
```

Makes sense, the votes track pretty cleanly with the number of votes. We can also use some regressions to get a peak.

```{r}
summary(lm(cbind(se_dim1, se_dim1) ~ nvotes + last_congress, data = bt))
```

### Bias
Let's see if there is any bias from fitting old points that could rotate:
```{r}
# The diff here is our ML ideal point minus the mean of the bootstrapped idpt
bt %>%
ggplot(aes(x = nvotes, y = dim1_diff)) + geom_point()
bt %>%
ggplot(aes(x = nvotes, y = dim2_diff)) + geom_point()
bt %>%
ggplot(aes(x = dim1, y = dim1_diff)) + geom_point()
bt %>%
ggplot(aes(x = dim2, y = dim2_diff)) + geom_point()
```

There is definitely some movement towards the middle on the average, away from the edges.

Bias does go down with the number of votes and if the votes were cast later.
```{r}
lm(cbind(dim1_diff, dim2_diff) ~ nvotes + last_congress, data = bt)
lm(cbind(abs_dim1_diff, abs_dim2_diff) ~ nvotes + last_congress, data = bt)
```
